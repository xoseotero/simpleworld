# Test code for source_test.cpp

.include "defines.swl"
.include "macros.swl"

.ifndef VALUE2
.define VALUE2 0x0003
.endif
.ifndef VALUE3
.define VALUE3 0x000F
.endif

# Loop
.label init
       # load the initial values
       loadi r1 VALUE1
       loadi r2 VALUE2

       # some operations
       add r0 r1 r2
       move r0 r1
       swap r2 r2

.ifdef VALUE1
       push r0
       div r0 r1 r2
       pop r0
       rri r0 r0 VALUE3
.endif

       # restart the CPU
       RESTART

       b init		# loop

# 4 bytes for the stack
STACK 0x0004
